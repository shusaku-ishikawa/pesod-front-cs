(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Register"],{"382a":function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));r("99af"),r("96cf");var n=r("1da1"),a=r("2e44"),o=r("2ef0");function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"customer",t={customer:"customer_token",doctor:"doctor_token"},r=Object(a["a"])(e),c=r.client,u=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c.get("/uuid/");case 2:return t=e.sent,r=t.data,console.log(r),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c.post("/customer_pre_create/",t);case 2:return r=e.sent,n=r.data,console.log(n),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c.get("/customer_activator/".concat(t));case 2:return r=e.sent,n=r.data,console.log(n),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=Object(o["cloneDeep"])(r),n.address="".concat(n.street).concat(n.building),delete n.street,delete n.building,e.next=6,c.put(t,n);case 6:return a=e.sent,u=a.data,console.log(u),e.abrupt("return",u);case 10:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),d=function(){console.log("getting token from "+t[e]);var r=window.localStorage.getItem(t[e]);if(null!=r)return JSON.parse(r)},p=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c.post("/auth/jwt/create/",t);case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(r){console.log("storeing token"+t[e]),window.localStorage.setItem(t[e],JSON.stringify(r))},m=function(){window.localStorage.removeItem(t[e])},b=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c.get("/auth/users/me/");case 2:return t=e.sent,r=t.data,e.abrupt("return",r.id);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c.get("/auth/users/".concat(t,"/"));case 2:return r=e.sent,n=r.data,console.log(n),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(e){window.localStorage.setItem("profile",JSON.stringify(e))},V=function(){window.localStorage.getItem("profile")},O=function(){window.localStorage.removeItem("profile")},j=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c.post("/signup/",t);case 2:r=e.sent,r.data;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{sendSignupEmail:l,activateAccount:i,registerProfile:s,createToken:p,storeToken:f,getToken:d,removeToken:m,getUserId:b,getProfile:g,getProfileFromStorage:V,removeProfile:O,storeProfile:v,signup:j,getUUID:u}}},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,r){var n=r("1d80"),a=r("5899"),o="["+a+"]",c=RegExp("^"+o+o+"*"),u=RegExp(o+o+"*$"),l=function(e){return function(t){var r=String(n(t));return 1&e&&(r=r.replace(c,"")),2&e&&(r=r.replace(u,"")),r}};e.exports={start:l(1),end:l(2),trim:l(3)}},"5c69":function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return a}));var n=function(e){if("string"===typeof e)return e?null:"必須項目です。"},a=function(e,t){return function(r){return e.test(r)?null:t}}},7156:function(e,t,r){var n=r("861d"),a=r("d2bb");e.exports=function(e,t,r){var o,c;return a&&"function"==typeof(o=t.constructor)&&o!==r&&n(c=o.prototype)&&c!==r.prototype&&a(e,c),e}},a9e3:function(e,t,r){"use strict";var n=r("83ab"),a=r("da84"),o=r("94ca"),c=r("6eeb"),u=r("5135"),l=r("c6b6"),i=r("7156"),s=r("c04e"),d=r("d039"),p=r("7c73"),f=r("241c").f,m=r("06cf").f,b=r("9bf2").f,g=r("58a8").trim,v="Number",V=a[v],O=V.prototype,j=l(p(O))==v,w=function(e){var t,r,n,a,o,c,u,l,i=s(e,!1);if("string"==typeof i&&i.length>2)if(i=g(i),t=i.charCodeAt(0),43===t||45===t){if(r=i.charCodeAt(2),88===r||120===r)return NaN}else if(48===t){switch(i.charCodeAt(1)){case 66:case 98:n=2,a=49;break;case 79:case 111:n=8,a=55;break;default:return+i}for(o=i.slice(2),c=o.length,u=0;u<c;u++)if(l=o.charCodeAt(u),l<48||l>a)return NaN;return parseInt(o,n)}return+i};if(o(v,!V(" 0o1")||!V("0b1")||V("+0x1"))){for(var h,N=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof N&&(j?d((function(){O.valueOf.call(r)})):l(r)!=v)?i(new V(w(t)),r,N):w(t)},y=n?f(V):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),x=0;y.length>x;x++)u(V,h=y[x])&&!u(N,h)&&b(N,h,m(V,h));N.prototype=O,O.constructor=N,c(a,v,N)}},cd38:function(e,t,r){"use strict";r.r(t);var n=r("7a23"),a=Object(n["createVNode"])("div",{class:"relative"},[Object(n["createVNode"])("div",{class:""}," 会員登録 ")],-1),o={key:0,class:"mb-5 text-red-600"},c={class:"grid grid-cols-12 gap-2"},u={class:"col-span-6 mb-10"},l={class:"col-span-6"},i={class:"col-span-6 mb-10"},s={class:"col-span-6"},d={class:"col-span-12 mb-10"},p={class:"col-span-12 mb-10"},f={class:"col-span-12 mb-10"},m={class:"col-span-12 mb-10"},b={class:"col-span-12 mb-10"},g={class:"col-span-12 mb-10"},v={class:"col-span-12 mb-10"},V={class:"col-span-12 mb-10"},O={class:"col-span-12 mb-10"},j=Object(n["createVNode"])("div",{class:"col-span-12 mb-10"},[Object(n["createVNode"])("button",{type:"submit",class:"primary w-64 mb-10"},[Object(n["createVNode"])("div",{class:"inline-block"}," 次にすすむ "),Object(n["createVNode"])("svg",{class:" w-6 h-6 float-right",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[Object(n["createVNode"])("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})])]),Object(n["createVNode"])("div",{class:"cursor-pointer"}," お問い合わせはこちら ")],-1);function w(e,t,r,w,h,N){var y=Object(n["resolveComponent"])("p-input"),x=Object(n["resolveComponent"])("gender-selector"),k=Object(n["resolveComponent"])("base-layout");return Object(n["openBlock"])(),Object(n["createBlock"])(k,null,{title:Object(n["withCtx"])((function(){return[a]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])("form",{ref:"form",onSubmit:t[14]||(t[14]=Object(n["withModifiers"])((function(){return e.onSubmit&&e.onSubmit.apply(e,arguments)}),["prevent"])),disabled:e.loading},[""!=e.formError?(Object(n["openBlock"])(),Object(n["createBlock"])("div",o,Object(n["toDisplayString"])(e.formError),1)):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])("div",c,[Object(n["createVNode"])("div",u,[Object(n["createVNode"])(y,{label:"姓",type:"text",required:!0,autocomplete:"first_name",modelValue:e.formData.first_name,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.formData.first_name=t}),rules:[e.formRequired]},null,8,["modelValue","rules"])]),Object(n["createVNode"])("div",l,[Object(n["createVNode"])(y,{label:"名",type:"text",required:!0,autocomplete:"last_name",modelValue:e.formData.last_name,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.formData.last_name=t}),rules:[e.formRequired]},null,8,["modelValue","rules"])]),Object(n["createVNode"])("div",i,[Object(n["createVNode"])(y,{label:"姓かな",type:"text",required:!0,autocomplete:"first_kana",modelValue:e.formData.first_kana,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.formData.first_kana=t}),rules:[e.formRequired]},null,8,["modelValue","rules"])]),Object(n["createVNode"])("div",s,[Object(n["createVNode"])(y,{label:"名かな",type:"text",required:!0,autocomplete:"last_kana",modelValue:e.formData.last_kana,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.formData.last_kana=t}),rules:[e.formRequired]},null,8,["modelValue","rules"])]),Object(n["createVNode"])("div",d,[Object(n["createVNode"])(y,{label:"郵便番号",type:"text",required:!0,autocomplete:"zip_code",modelValue:e.formData.zip_code,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.formData.zip_code=t}),rules:[e.formRequired,e.getRegexpTester("^[0-9]{7}","7桁の数値を入力してください。")]},null,8,["modelValue","rules"])]),Object(n["createVNode"])("div",p,[Object(n["createVNode"])(y,{label:"都道府県",type:"text",required:!0,autocomplete:"prefecture",modelValue:e.formData.prefecture,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.formData.prefecture=t}),rules:[e.formRequired]},null,8,["modelValue","rules"])]),Object(n["createVNode"])("div",f,[Object(n["createVNode"])(y,{label:"市区町村",type:"text",required:!0,autocomplete:"city",modelValue:e.formData.city,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.formData.city=t}),rules:[e.formRequired]},null,8,["modelValue","rules"])]),Object(n["createVNode"])("div",m,[Object(n["createVNode"])(y,{label:"番地",type:"text",required:!0,autocomplete:"street",modelValue:e.formData.street,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.formData.street=t}),rules:[e.formRequired]},null,8,["modelValue","rules"])]),Object(n["createVNode"])("div",b,[Object(n["createVNode"])(y,{label:"建物名（任意）",type:"text",autocomplete:"building",modelValue:e.formData.building,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.formData.building=t}),rules:[]},null,8,["modelValue"])]),Object(n["createVNode"])("div",g,[Object(n["createVNode"])(y,{label:"電話番号",type:"text",required:!0,autocomplete:"phone_number",modelValue:e.formData.phone_number,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.formData.phone_number=t}),rules:[e.formRequired,e.getRegexpTester("^[0-9]{10,15}","10桁以上15桁以下の数値を入力してください。")]},null,8,["modelValue","rules"])]),Object(n["createVNode"])("div",v,[Object(n["createVNode"])(y,{label:"生年月日",type:"text",required:!0,autocomplete:"birthday",modelValue:e.formData.birthday,"onUpdate:modelValue":t[11]||(t[11]=function(t){return e.formData.birthday=t}),rules:[e.formRequired,e.getRegexpTester("^[0-9]{4}-[0-9]{1,2}-[0-9]{1,2}","YYYY-MM-DDの形式で入力してください。")]},null,8,["modelValue","rules"])]),Object(n["createVNode"])("div",V,[Object(n["createVNode"])(y,{label:"パスワード",type:"password",required:!0,autocomplete:"password",modelValue:e.formData.password,"onUpdate:modelValue":t[12]||(t[12]=function(t){return e.formData.password=t}),rules:[e.formRequired]},null,8,["modelValue","rules"])]),Object(n["createVNode"])("div",O,[Object(n["createVNode"])(x,{modelValue:e.formData.gender,"onUpdate:modelValue":t[13]||(t[13]=function(t){return e.formData.gender=t})},null,8,["modelValue"])]),j])],40,["disabled"])]})),_:1})}r("d3b7"),r("25f0"),r("96cf");var h=r("1da1"),N=r("6c02"),y=r("5c69"),x={class:"w-full grid grid-cols-2"};function k(e,t,r,a,o,c){return Object(n["openBlock"])(),Object(n["createBlock"])("div",x,[Object(n["createVNode"])("div",{onClick:t[1]||(t[1]=function(t){return e.changeTo(0)}),class:["cursor-pointer col-span-1 border py-2",{"bg-yellow-400":0===e.modelValue}]}," 男性 ",2),Object(n["createVNode"])("div",{onClick:t[2]||(t[2]=function(t){return e.changeTo(1)}),class:[{"bg-yellow-400":1===e.modelValue},"cursor-pointer col-span-1 border py-2"]}," 女性 ",2)])}r("a9e3");var R=Object(n["defineComponent"])({components:{},props:{modelValue:{type:Number}},emits:["update:modelValue"],setup:function(e,t){var r=function(e){t.emit("update:modelValue",e)};return{changeTo:r}}});R.render=k;var _=R,D=r("382a"),I=Object(n["defineComponent"])({components:{GenderSelector:_},setup:function(){var e=Object(N["d"])(),t=Object(N["c"])(),r=t.params.token.toString(),a=Object(D["a"])(),o=a.activateAccount,c=a.registerProfile,u=Object(n["ref"])({first_name:"",last_name:"",first_kana:"",last_kana:"",phone_number:"",gender:0,birthday:"",prefecture:"",city:"",street:"",building:"",zip_code:"",password:""}),l=Object(n["ref"])(null),i=Object(n["ref"])(""),s=function(e){i.value=e,window.setTimeout((function(){i.value=""}),5e3)},d=Object(n["ref"])(!1),p=null;Object(n["onMounted"])(Object(h["a"])(regeneratorRuntime.mark((function e(){var t,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o(r);case 3:t=e.sent,p=t.registration_url,e.next=13;break;case 7:return e.prev=7,e.t0=e["catch"](0),n=e.t0.response,n?(n.status,a=n.data,console.error(a)):alert("error"),alert("failed to activate account"),e.abrupt("return");case 13:case"end":return e.stop()}}),e,null,[[0,7]])}))));var f=function(){var t=Object(h["a"])(regeneratorRuntime.mark((function t(r){var n,a,o,i,f;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null!=p){t.next=2;break}return t.abrupt("return");case 2:if(!l.value){t.next=7;break}if(n=l.value.checkValidity(),n){t.next=7;break}return alert("not vaida"),t.abrupt("return");case 7:return t.prev=7,t.next=10,c(p,u.value);case 10:a=t.sent,o={access:a.access,refresh:a.refresh},window.localStorage.setItem("token",JSON.stringify(o)),e.push({name:"DiagnosticTop"}),t.next=20;break;case 16:t.prev=16,t.t0=t["catch"](7),console.log(t.t0),t.t0.response?(i=t.t0.response,i.status,f=i.data,console.log(f),s(JSON.stringify(f))):s("ネットワークエラー");case 20:d.value=!1;case 21:case"end":return t.stop()}}),t,null,[[7,16]])})));return function(e){return t.apply(this,arguments)}}();return{form:l,formData:u,formError:i,formRequired:y["a"],getRegexpTester:y["b"],onSubmit:f}}});I.render=w;t["default"]=I}}]);
//# sourceMappingURL=Register.40cf8a76.js.map