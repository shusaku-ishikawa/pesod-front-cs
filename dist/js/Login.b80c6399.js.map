{"version":3,"sources":["webpack:///./src/types/Auth.ts","webpack:///./src/assets/img/pesod_logo_s.png","webpack:///./src/mixins/FormValidator.ts","webpack:///./node_modules/core-js/modules/es.array.map.js","webpack:///./src/types/Prescript.ts","webpack:///./src/views/ForClient/Login.vue","webpack:///./src/views/ForClient/Login.vue?b933","webpack:///./src/views/ForClient/Login.vue?e08c"],"names":["getUUID","get","data","console","log","sendSignupEmail","formData","post","activateAccount","token","registerProfile","registrationUrl","formDataCopy","address","street","building","put","getToken","d","window","localStorage","getItem","JSON","parse","createToken","postData","storeToken","setItem","stringify","remoteToken","removeItem","getUserId","id","getProfile","userId","signup","useAuth","module","exports","required","v","getRegexpTester","pattern","errorMessage","test","$","$map","map","arrayMethodHasSpeciesSupport","arrayMethodUsesToLength","HAS_SPECIES_SUPPORT","USES_TO_LENGTH","target","proto","forced","callbackfn","this","arguments","length","undefined","getPrescript","fixInterview","selectDoctor","doctorId","patch","doctor","fetchPrescripts","results","setPrescriptProducts","prescriptNo","products","prescriptProducts","p","product","acceptPrescriptProducts","deletePrescriptProducts","delete","usePrescript","myPrescript","prescripts","class","stroke-linecap","stroke-linejoin","stroke-width","style","src","alt","title","to","href","navigate","xmlns","fill","viewBox","stroke","disabled","loading","ref","method","onLogin","loginError","label","type","autocomplete","email","rules","formRequired","password","components","setup","router","form","setLoginError","message","value","setTimeout","event","isValid","checkValidity","alert","tokenData","push","name","response","status","render"],"mappings":"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","file":"js/Login.b80c6399.js","sourcesContent":["import { client } from '@/types/Axios';\nimport { ILogin, ISignup, ICustomer, IPrescript, IToken, IRegistration } from '@/types/Interfaces';\nimport { computed, ComputedRef, WritableComputedRef } from 'vue';\nimport { cloneDeep, clone, runInContext } from \"lodash\";\n\n// const token: WritableComputedRef<IToken | null> = computed({\n//   get: () => {\n//     const token = window.localStorage.getItem('token');\n//     if (token == null) return null;\n//     return JSON.parse(token);\n//   },\n//   set: (data: IToken | null) => {\n//     if (data == null) {\n//       window.localStorage.removeItem('token');\n//       return;\n//     }\n//     window.localStorage.setItem('token', JSON.stringify(data))\n//   }  \n// });\n\n\nconst getUUID = async () => {\n  const {data} = await client.get('/uuid/')\n  console.log(data)\n  return data;\n}\n\nconst sendSignupEmail = async (formData: any) => {\n  const {data} = await client.post('/customer_pre_create/', formData);\n  console.log(data);\n  return data;  \n};\nconst activateAccount = async (token: string) => {\n  const {data} = await client.get(`/customer_activator/${token}`);\n  console.log(data)\n  return data;  \n};\nconst registerProfile = async (registrationUrl: string, formData: IRegistration) => {\n  const formDataCopy = cloneDeep(formData);\n  \n  formDataCopy.address = `${formDataCopy.street}${formDataCopy.building}`;\n  delete formDataCopy.street;\n  delete formDataCopy.building;\n  const {data} = await client.put(registrationUrl, formDataCopy);\n  console.log(data)\n  return data;\n}\n\nconst getToken = () => {\n  const d = window.localStorage.getItem('token')\n  if (d == null) return;\n  return JSON.parse(d);\n}\nconst createToken = async (postData: ILogin) => {\n  const {data} = await client.post('/auth/jwt/create/', postData);\n  // console.log(data)\n  return data;\n  // window.localStorage.setItem('token', JSON.stringify(data));    \n};\n\nconst storeToken = (token: IToken) => {\n  window.localStorage.setItem('token', JSON.stringify(token))\n}\n\nconst remoteToken = () => {\n  window.localStorage.removeItem('token');\n};\n\nconst getUserId = async () => {\n  const {data} = await client.get('/auth/users/me/')\n  return data.id;\n};\n\nconst getProfile = async (userId: number) => {\n  const {data} = await client.get(`/auth/users/${userId}/`);\n  console.log(data)\n  return data;\n};\n\n\nconst signup = async (postData: ISignup) => {\n  const { data } = await client.post(\n    `/signup/`, postData\n  );\n};\n\n\n\nexport default function useAuth () {\n  return {\n    sendSignupEmail,\n    activateAccount,\n    registerProfile,\n    createToken,\n    storeToken,\n    getToken,\n    remoteToken,\n    getUserId,\n    getProfile,\n    signup,\n    getUUID\n  }\n}","module.exports = __webpack_public_path__ + \"img/pesod_logo_s.3a57fb5e.png\";","\nconst required = (v: any) => {\n  if (typeof v === 'string') {\n    return v ? null : '必須項目です。'\n  }\n};\nconst getRegexpTester = (pattern: RegExp, errorMessage: string) => {\n  return (v: any) => {\n    return pattern.test(v) ? null : errorMessage;\n  }\n}\n\nexport {\n  required as formRequired,\n  getRegexpTester\n}","'use strict';\nvar $ = require('../internals/export');\nvar $map = require('../internals/array-iteration').map;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');\n// FF49- issue\nvar USES_TO_LENGTH = arrayMethodUsesToLength('map');\n\n// `Array.prototype.map` method\n// https://tc39.es/ecma262/#sec-array.prototype.map\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","\n\nimport { ComputedRef, computed, ref, WritableComputedRef } from 'vue';\nimport { IPrescript, IProduct } from '@/types/Interfaces';\nimport { client } from '@/types/Axios';\n\n//const prescript: WritableComputedRef<IPrescript | null> = computed({\n  // get: () => {\n  //   const data = window.localStorage.getItem('prescript');\n  //   if (data) {\n  //     return JSON.parse(data);\n  //   } else {\n  //     return null;\n  //   }\n  // },\n  // set: (data: IPrescript | null) => {\n  //   if (data == null) {\n  //     window.localStorage.removeItem('prescript');\n  //     return;\n  //   }\n  //   window.localStorage.setItem('prescript', JSON.stringify(data))\n  // }\n// });\n\nconst getPrescript = async () => {\n  const {data} = await client.get('/prescript/');\n  console.log(data)\n  return data;\n}\n\nconst fixInterview = async () => {\n  const {data} = await client.get('/prescript/interview_fix')\n  return data;\n}\n\nconst selectDoctor = async (doctorId: number) => {\n  const {data} = await client.patch('/prescript/select_doctor', { doctor: doctorId })\n  return data; \n}\n\nconst fetchPrescripts = async (): Promise<IPrescript[]> => {\n  const {data} = await client.get('/prescripts/')\n  console.log(data)\n  return data.results;\n}\n\nconst setPrescriptProducts = async (prescriptNo: string, products: IProduct[]) => {\n  const prescriptProducts = products.map((p: IProduct) => ({ product: p.id }));\n  console.log(prescriptProducts)\n  const {data} = await client.patch(`/prescribe/${prescriptNo}`, { products: prescriptProducts });\n  console.log(data)\n  return data;\n}\n\nconst acceptPrescriptProducts = async () => {\n  const {data} = await client.patch('/prescript/exam_fix', {});\n  console.log(data);\n  return data;\n};\n\nconst deletePrescriptProducts = async (prescriptNo: string) => {\n  const {data} = await client.delete(`/prescribe/${prescriptNo}`);\n  return data;\n\n}\n\n\n\nexport default function usePrescript () {\n  const myPrescript = ref<IPrescript | null>(null);\n  const prescripts = ref<IPrescript[]>([]);\n\n  return {\n    // prescript,\n    myPrescript,\n    prescripts,\n    getPrescript,\n    fixInterview,\n    selectDoctor,\n    fetchPrescripts,\n    setPrescriptProducts,\n    acceptPrescriptProducts,\n    deletePrescriptProducts\n    \n  }\n}","<template>\n  <top-layout>\n    <template v-slot:title>\n      <div class=\"relative\">\n        <router-link\n          :to=\"{ name: 'Lp' }\"\n          v-slot=\"{ href, navigate }\"\n        >\n          <svg\n            :href=\"href\"\n            @click=\"navigate\"\n            class=\"absolute top-0 left-0 w-6 h-6 cursor-pointer\"\n            xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 19l-7-7 7-7\" />\n          </svg>\n        </router-link>\n        <div class=\"\">\n          ログイン\n        </div>\n      </div>\n    </template>\n    <div class=\"\">\n      <div class=\"mb-10\">\n        <img\n          class=\"mx-auto\"\n          style=\"width: 100px\"\n          src=\"@/assets/img/pesod_logo_s.png\"\n          alt=\"\"\n          \n        >\n      </div>\n      <form\n        :disabled=\"loading\"\n        ref=\"from\"\n        method=\"post\"\n        class=\"py-5 p-5 \"\n        @submit.prevent=\"onLogin\"\n      >\n        <div\n          v-if=\"loginError != ''\"\n          class=\"mb-5 text-red-600\"\n        >\n          {{ loginError }}\n        </div>\n        <p-input\n          class=\"mb-3\"\n          label=\"メールアドレス\"\n          id=\"email\"\n          type=\"email\"\n          :required=\"true\"\n          autocomplete=\"email\"\n          v-model=\"formData.email\"\n          :rules=\"[formRequired]\"\n        >\n        </p-input>\n        <p-input\n          class=\"mb-12\"\n          label=\"パスワード\"\n          autocomplete=\"current-password\"\n          id=\"password\"\n          type=\"password\"\n          v-model=\"formData.password\"\n          :rules=\"[formRequired]\"\n        >\n        </p-input>\n        <div\n          class=\"text-center\"\n        >\n          \n          <button\n            :disabled=\"loading\"\n            type=\"submit\"\n            class=\"primary arrow w-64 mb-10\"\n          >\n            ログイン\n            \n          </button>\n          <div>\n            <a class=\"cursor-pointer \">パスワードをお忘れの方はこちら</a>\n          </div>\n        </div>\n      </form>\n    </div>\n  </top-layout>\n</template>\n<script lang=\"ts\">\nimport { computed, defineComponent, onMounted, ref } from 'vue';\nimport { useRoute, useRouter } from 'vue-router';\nimport { ILogin } from '@/types/Interfaces';\nimport {formRequired} from '@/mixins/FormValidator';\n\nimport useAuth from '@/types/Auth';\nimport usePrescript from '@/types/Prescript';\nimport StoreVue from './Diagnostic/Store.vue';\n\nexport default defineComponent({\n  components: {\n  },\n  setup() {\n    const router = useRouter();\n\n    const {\n      createToken,\n      remoteToken,\n      storeToken,\n    } = useAuth();\n    const {\n      getPrescript\n    } = usePrescript();\n    \n    const formData = ref<ILogin>({\n      email: '',\n      password: '' \n    });\n    \n    const form = ref<HTMLFormElement | null>(null);\n\n    const loginError = ref<string>('');\n    \n    const setLoginError = (message: string) => {\n      loginError.value = message;\n      window.setTimeout(() => {\n        loginError.value = '';\n      }, 5000);  \n    };\n    \n    onMounted(() => {\n      remoteToken();\n    });\n\n    const loading = ref(false);\n\n    const onLogin = async (event: Event) => {\n      // validate\n      if (form.value) {\n        const isValid = form.value.checkValidity();\n        if (!isValid) {\n          alert('not vaida')\n          return;\n        }\n      }\n      try {\n        loading.value = true;\n        const tokenData = await createToken(formData.value);\n        storeToken(tokenData);\n        router.push({ name: 'Top' }) ;\n      } catch (err) {\n        console.log(err)\n        if (err.response) {\n          const { status, data } = err.response;\n          \n          if (status >= 400 && status < 500) {\n            alert(JSON.stringify(data))\n            setLoginError('ログインに失敗しました。')\n          } else {\n            setLoginError(JSON.stringify(data))\n          }\n          // formData.value = {\n          //   email: '',\n          //   password: ''\n          // }\n        } else {\n          // network error or timeout\n          setLoginError(JSON.stringify(err))\n        }\n        \n      }\n      loading.value = false;\n      \n    };\n    return {\n      loading,\n      form,\n      formRequired,\n      formData,\n      loginError,\n      // formValid,\n      onLogin\n    };\n  }\n})\n</script>","\nimport { computed, defineComponent, onMounted, ref } from 'vue';\nimport { useRoute, useRouter } from 'vue-router';\nimport { ILogin } from '@/types/Interfaces';\nimport {formRequired} from '@/mixins/FormValidator';\n\nimport useAuth from '@/types/Auth';\nimport usePrescript from '@/types/Prescript';\nimport StoreVue from './Diagnostic/Store.vue';\n\nexport default defineComponent({\n  components: {\n  },\n  setup() {\n    const router = useRouter();\n\n    const {\n      createToken,\n      remoteToken,\n      storeToken,\n    } = useAuth();\n    const {\n      getPrescript\n    } = usePrescript();\n    \n    const formData = ref<ILogin>({\n      email: '',\n      password: '' \n    });\n    \n    const form = ref<HTMLFormElement | null>(null);\n\n    const loginError = ref<string>('');\n    \n    const setLoginError = (message: string) => {\n      loginError.value = message;\n      window.setTimeout(() => {\n        loginError.value = '';\n      }, 5000);  \n    };\n    \n    onMounted(() => {\n      remoteToken();\n    });\n\n    const loading = ref(false);\n\n    const onLogin = async (event: Event) => {\n      // validate\n      if (form.value) {\n        const isValid = form.value.checkValidity();\n        if (!isValid) {\n          alert('not vaida')\n          return;\n        }\n      }\n      try {\n        loading.value = true;\n        const tokenData = await createToken(formData.value);\n        storeToken(tokenData);\n        router.push({ name: 'Top' }) ;\n      } catch (err) {\n        console.log(err)\n        if (err.response) {\n          const { status, data } = err.response;\n          \n          if (status >= 400 && status < 500) {\n            alert(JSON.stringify(data))\n            setLoginError('ログインに失敗しました。')\n          } else {\n            setLoginError(JSON.stringify(data))\n          }\n          // formData.value = {\n          //   email: '',\n          //   password: ''\n          // }\n        } else {\n          // network error or timeout\n          setLoginError(JSON.stringify(err))\n        }\n        \n      }\n      loading.value = false;\n      \n    };\n    return {\n      loading,\n      form,\n      formRequired,\n      formData,\n      loginError,\n      // formValid,\n      onLogin\n    };\n  }\n})\n","import { render } from \"./Login.vue?vue&type=template&id=11e8ae43\"\nimport script from \"./Login.vue?vue&type=script&lang=ts\"\nexport * from \"./Login.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}