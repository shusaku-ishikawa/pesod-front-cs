(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["SupportHairConsultant"],{"037c":function(e,t,n){"use strict";n.r(t);var r=n("7a23"),a={class:"flex items-center absolute left-0"},c=Object(r["h"])("div",null," 相談窓口 ",-1),o=Object(r["h"])("div",null,"毛髪診断士に相談",-1),u={class:"flex-grow flex flex-col"},s={ref:"messageArea",class:"relative overflow-y-auto flex-grow"},l={class:"absolute w-full space-y-4 py-5"};function i(e,t,n,i,f,b){var d=Object(r["B"])("page-title-back"),p=Object(r["B"])("router-link"),g=Object(r["B"])("page-title"),v=Object(r["B"])("chat-message-card"),m=Object(r["B"])("chat-form"),O=Object(r["B"])("base-layout");return Object(r["t"])(),Object(r["d"])(O,null,{title:Object(r["H"])((function(){return[Object(r["h"])(g,null,{default:Object(r["H"])((function(){return[Object(r["h"])("div",a,[Object(r["h"])(p,{to:{name:"SupportTop"}},{default:Object(r["H"])((function(e){var t=e.href,n=e.navigate;return[Object(r["h"])(d,{href:t,onClick:n},null,8,["href","onClick"])]})),_:1}),c]),o,Object(r["h"])("div",{class:["w-3 h-3 shadow-lg rounded-full ml-1 text-white",{"bg-green-400":1===e.wsState,"bg-gray-600":3===e.wsState}]},null,2)]})),_:1})]})),default:Object(r["H"])((function(){return[Object(r["h"])("div",u,[Object(r["h"])("div",s,[Object(r["h"])("div",l,[(Object(r["t"])(!0),Object(r["d"])(r["a"],null,Object(r["z"])(e.messages,(function(e,t){return Object(r["t"])(),Object(r["d"])(v,{key:t,message:e},null,8,["message"])})),128))])],512),Object(r["h"])(m,{modelValue:e.message,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.message=t}),onSend:e.onSendMessage},null,8,["modelValue","onSend"])])]})),_:1})}n("498a");var f=n("e59e"),b=n("0b48"),d=n("472c"),p=n("6834"),g=Object(r["i"])({components:{ChatForm:b["a"],ChatMessageCard:f["a"]},setup:function(){var e=Object(d["a"])(),t=e.chatLogs,n=Object(p["a"])(),a=n.connection,c=(n.connect,n.messageArea),o=n.scrollDown,u=n.wsState,s=(n.wsStateStr,n.message),l=n.prepareWs,i="ws://localhost:8000/",f=function(){if(null!=a.value&&s.value.trim()&&a.value.readyState===a.value.OPEN){var e={speaker:{id:1,name:"Robert"},message:s.value};try{a.value.send(JSON.stringify(e)),s.value=""}catch(t){console.error("errr")}}};return Object(r["q"])((function(){l(i,t),window.setTimeout((function(){o()}),100)})),{onSendMessage:f,message:s,chatLogs:t,messageArea:c,wsState:u}}});g.render=i;t["default"]=g},"0b48":function(e,t,n){"use strict";n("498a");var r=n("7a23"),a={class:"w-full p-1"},c={class:"flex "};function o(e,t,n,o,u,s){return Object(r["t"])(),Object(r["d"])("div",a,[Object(r["h"])("form",{class:"relative",onSubmit:t[3]||(t[3]=Object(r["J"])((function(){}),["prevent"]))},[Object(r["h"])("textarea",{class:"focus:outline-none w-full border-t p-2",cols:"30",rows:"2",value:e.modelValue,onInput:t[1]||(t[1]=function(){return e.onInputMessage&&e.onInputMessage.apply(e,arguments)})},null,40,["value"]),Object(r["h"])("div",c,[Object(r["A"])(e.$slots,"menu"),Object(r["h"])("button",{onClick:t[2]||(t[2]=function(){return e.onSendMessage&&e.onSendMessage.apply(e,arguments)}),disabled:!e.modelValue.trim(),class:"ml-auto bg-gray-100 rounded-lg border text-sm"}," 送信 ",8,["disabled"])])],32)])}var u=n("472c"),s=Object(r["i"])({components:{},props:{modelValue:{type:String}},setup:function(e,t){var n=Object(u["a"])(),r=(n.fetchCustomerMessageTemplates,function(e){var n=e.target;console.log("innput chagne"),n instanceof HTMLTextAreaElement&&t.emit("update:modelValue",n.value)}),a=function(){t.emit("send")};return{onInputMessage:r,onSendMessage:a}}});s.render=o;t["a"]=s},"159b":function(e,t,n){var r=n("da84"),a=n("fdbc"),c=n("17c2"),o=n("9112");for(var u in a){var s=r[u],l=s&&s.prototype;if(l&&l.forEach!==c)try{o(l,"forEach",c)}catch(i){l.forEach=c}}},"17c2":function(e,t,n){"use strict";var r=n("b727").forEach,a=n("a640"),c=n("ae40"),o=a("forEach"),u=c("forEach");e.exports=o&&u?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},4160:function(e,t,n){"use strict";var r=n("23e7"),a=n("17c2");r({target:"Array",proto:!0,forced:[].forEach!=a},{forEach:a})},"472c":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));n("96cf");var r=n("1da1"),a=n("7a23"),c=n("2e44"),o=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c["a"].get("/chatlog/doctor/".concat(t));case 2:return n=e.sent,r=n.data,console.log(r),a=r.results,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c["a"].get("/customer_tpl_msg/");case 2:return t=e.sent,n=t.data,console.log(n),e.abrupt("return",n.results);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c["a"].get("/doctor_tpl_msg/");case 2:return t=e.sent,n=t.data,console.log(n),e.abrupt("return",n.results);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function l(){var e=Object(a["y"])([]);return{chatLogs:e,fetchDoctorChatLogs:o,fetchDoctorMessageTemplates:s,fetchCustomerMessageTemplates:u}}},"498a":function(e,t,n){"use strict";var r=n("23e7"),a=n("58a8").trim,c=n("c8d2");r({target:"String",proto:!0,forced:c("trim")},{trim:function(){return a(this)}})},"4de4":function(e,t,n){"use strict";var r=n("23e7"),a=n("b727").filter,c=n("1dde"),o=n("ae40"),u=c("filter"),s=o("filter");r({target:"Array",proto:!0,forced:!u||!s},{filter:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,n){var r=n("1d80"),a=n("5899"),c="["+a+"]",o=RegExp("^"+c+c+"*"),u=RegExp(c+c+"*$"),s=function(e){return function(t){var n=String(r(t));return 1&e&&(n=n.replace(o,"")),2&e&&(n=n.replace(u,"")),n}};e.exports={start:s(1),end:s(2),trim:s(3)}},6834:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));n("a4d3"),n("4de4"),n("4160"),n("e439"),n("dbb4"),n("b64b"),n("159b");function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var o=n("7a23");function u(){var e="".concat("ws://v118-27-116-148.7813.static.cnode.io","/ws"),t=Object(o["y"])(null),n=function(e){t.value=new WebSocket(e)},r=function(){null!=t.value&&t.value.close()},a=Object(o["y"])(null),u=function(){null!=a.value&&(a.value.scrollTop=a.value.scrollHeight)},s=Object(o["y"])(null),l=Object(o["b"])((function(){return 1===s.value?"Open":3===s.value?"Closed":void 0})),i=function(e,r,a){n(e),s.value,null!=t.value&&(t.value.onopen=function(e){null!=t.value&&(console.log("on open"),s.value=t.value.OPEN)},t.value.onmessage=function(e){console.log("message "+e.data);var t=JSON.parse(e.data),n=c({id:1},t);r.value.push(n),window.setTimeout((function(){u()}),100),null!=a&&a(t)},t.value.onclose=function(e){console.log("on close"),null!=t.value&&(s.value=t.value.CLOSED)},t.value.onerror=function(e){console.log("on error"),t.value})},f=Object(o["y"])("");return{WS_BASE_URL:e,connection:t,connect:n,close:r,messageArea:a,scrollDown:u,wsState:s,wsStateStr:l,message:f,prepareWs:i}}},a640:function(e,t,n){"use strict";var r=n("d039");e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){throw 1},1)}))}},b64b:function(e,t,n){var r=n("23e7"),a=n("7b0b"),c=n("df75"),o=n("d039"),u=o((function(){c(1)}));r({target:"Object",stat:!0,forced:u},{keys:function(e){return c(a(e))}})},c8d2:function(e,t,n){var r=n("d039"),a=n("5899"),c="​᠎";e.exports=function(e){return r((function(){return!!a[e]()||c[e]()!=c||a[e].name!==e}))}},dbb4:function(e,t,n){var r=n("23e7"),a=n("83ab"),c=n("56ef"),o=n("fc6a"),u=n("06cf"),s=n("8418");r({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(e){var t,n,r=o(e),a=u.f,l=c(r),i={},f=0;while(l.length>f)n=a(r,t=l[f++]),void 0!==n&&s(i,t,n);return i}})},e439:function(e,t,n){var r=n("23e7"),a=n("d039"),c=n("fc6a"),o=n("06cf").f,u=n("83ab"),s=a((function(){o(1)})),l=!u||s;r({target:"Object",stat:!0,forced:l,sham:!u},{getOwnPropertyDescriptor:function(e,t){return o(c(e),t)}})},e59e:function(e,t,n){"use strict";var r=n("7a23"),a={class:"flex items-end space-y-1 mx-2"},c={class:"text-xs ml-2"};function o(e,t,n,o,u,s){return Object(r["t"])(),Object(r["d"])("div",{class:["flex items-end px-1",{"justify-end":!e.isMyMessage}]},[Object(r["h"])("div",a,[Object(r["h"])("span",{innerHTML:e.htmlify(e.chatLog.message),class:[{"rounded-bl-none":e.isMyMessage,"rounded-br-none":!e.isMyMessage},"text-left sm:max-w-sm md:max-w-md break-words text-sm leading-tight px-4 py-4 rounded-lg inline-block bg-gray-300 text-gray-600"]},null,10,["innerHTML"]),Object(r["h"])("div",c,Object(r["D"])(e.HHMM(e.chatLog.created_at)),1)])],2)}var u=n("c1df"),s=n.n(u),l=Object(r["i"])({components:{},props:{chatLog:{type:Object,required:!0},isMyMessage:{type:Boolean}},setup:function(e,t){var n=function(e){return s()(e).format("H:mm")},r=function(e){return e.replaceAll("\n","<br>")};return{HHMM:n,htmlify:r}}});l.render=o;t["a"]=l}}]);
//# sourceMappingURL=SupportHairConsultant.1529dea4.js.map