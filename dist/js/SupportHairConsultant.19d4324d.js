(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["SupportHairConsultant"],{"037c":function(e,t,n){"use strict";n.r(t);var r=n("7a23"),o={class:"flex items-center absolute left-0"},c=Object(r["createVNode"])("div",null," 相談窓口 ",-1),a=Object(r["createVNode"])("div",null,"毛髪診断士に相談",-1),u={class:"flex-grow flex flex-col"},s={ref:"messageArea",class:"relative overflow-y-auto flex-grow"},l={class:"absolute w-full space-y-4 py-5"};function i(e,t,n,i,f,d){var p=Object(r["resolveComponent"])("page-title-back"),b=Object(r["resolveComponent"])("router-link"),g=Object(r["resolveComponent"])("page-title"),v=Object(r["resolveComponent"])("chat-message-card"),m=Object(r["resolveComponent"])("chat-form"),O=Object(r["resolveComponent"])("base-layout");return Object(r["openBlock"])(),Object(r["createBlock"])(O,null,{title:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(g,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])("div",o,[Object(r["createVNode"])(b,{to:{name:"SupportTop"}},{default:Object(r["withCtx"])((function(e){var t=e.href,n=e.navigate;return[Object(r["createVNode"])(p,{href:t,onClick:n},null,8,["href","onClick"])]})),_:1}),c]),a,Object(r["createVNode"])("div",{class:["w-3 h-3 shadow-lg rounded-full ml-1 text-white",{"bg-green-400":1===e.wsState,"bg-gray-600":3===e.wsState}]},null,2)]})),_:1})]})),default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])("div",u,[Object(r["createVNode"])("div",s,[Object(r["createVNode"])("div",l,[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.messages,(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])(v,{key:t,message:e},null,8,["message"])})),128))])],512),Object(r["createVNode"])(m,{modelValue:e.message,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.message=t}),onSend:e.onSendMessage},null,8,["modelValue","onSend"])])]})),_:1})}n("498a");var f=n("e59e"),d=n("0b48"),p=n("472c"),b=n("6834"),g=Object(r["defineComponent"])({components:{ChatForm:d["a"],ChatMessageCard:f["a"]},setup:function(){var e=Object(p["a"])(),t=e.chatLogs,n=Object(b["a"])(),o=n.connection,c=(n.connect,n.messageArea),a=n.scrollDown,u=n.wsState,s=(n.wsStateStr,n.message),l=n.prepareWs,i="ws://localhost:8000/",f=function(){if(null!=o.value&&s.value.trim()&&o.value.readyState===o.value.OPEN){var e={speaker:{id:1,name:"Robert"},message:s.value};try{o.value.send(JSON.stringify(e)),s.value=""}catch(t){console.error("errr")}}};return Object(r["onMounted"])((function(){l(i,t),window.setTimeout((function(){a()}),100)})),{onSendMessage:f,message:s,chatLogs:t,messageArea:c,wsState:u}}});g.render=i;t["default"]=g},"0b48":function(e,t,n){"use strict";n("498a");var r=n("7a23"),o={class:"w-full p-1"},c=Object(r["createVNode"])("path",{stroke:"#374151",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M3 8V4m0 0h4M3 4l4 4m8 0V4m0 0h-4m4 0l-4 4m-8 4v4m0 0h4m-4 0l4-4m8 4l-4-4m4 4v-4m0 4h-4"},null,-1),a={class:"flex "};function u(e,t,n,u,s,l){return Object(r["openBlock"])(),Object(r["createBlock"])("div",o,[Object(r["createVNode"])("form",{class:"relative",onSubmit:t[4]||(t[4]=Object(r["withModifiers"])((function(){}),["prevent"]))},[(Object(r["openBlock"])(),Object(r["createBlock"])("svg",{onClick:t[1]||(t[1]=function(t){return e.expand=!e.expand}),xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6 absolute cursor-pointer right-5 top-1 bg-white",viewBox:"0 0 20 20",fill:"currentColor"},[c])),Object(r["createVNode"])("textarea",{placeholder:"メッセージを入力",class:"focus:outline-none w-full border-t p-2 pr-8 overflow-y-scroll",cols:"30",rows:e.expand?20:2,value:e.modelValue,onInput:t[2]||(t[2]=function(){return e.onInputMessage&&e.onInputMessage.apply(e,arguments)})},null,40,["rows","value"]),Object(r["createVNode"])("div",a,[Object(r["renderSlot"])(e.$slots,"menu"),Object(r["createVNode"])("button",{onClick:t[3]||(t[3]=function(){return e.onSendMessage&&e.onSendMessage.apply(e,arguments)}),disabled:!e.modelValue.trim(),class:"ml-auto bg-gray-100 rounded-lg border text-sm"}," 送信 ",8,["disabled"])])],32)])}var s=n("472c"),l=Object(r["defineComponent"])({components:{},props:{modelValue:{type:String}},setup:function(e,t){var n=Object(s["a"])(),o=(n.fetchCustomerMessageTemplates,function(e){var n=e.target;console.log("innput chagne"),n instanceof HTMLTextAreaElement&&t.emit("update:modelValue",n.value)}),c=function(){t.emit("send")},a=Object(r["ref"])(!1);return{expand:a,onInputMessage:o,onSendMessage:c}}});l.render=u;t["a"]=l},"159b":function(e,t,n){var r=n("da84"),o=n("fdbc"),c=n("17c2"),a=n("9112");for(var u in o){var s=r[u],l=s&&s.prototype;if(l&&l.forEach!==c)try{a(l,"forEach",c)}catch(i){l.forEach=c}}},"17c2":function(e,t,n){"use strict";var r=n("b727").forEach,o=n("a640"),c=n("ae40"),a=o("forEach"),u=c("forEach");e.exports=a&&u?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},4160:function(e,t,n){"use strict";var r=n("23e7"),o=n("17c2");r({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})},"472c":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n("96cf");var r=n("1da1"),o=n("7a23"),c=n("2e44");function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"customer",t=Object(c["a"])(e),n=t.client,a=Object(o["ref"])([]),u=(Object(o["ref"])(1),function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.get("/chatlog/doctor/".concat(t));case 2:return r=e.sent,o=r.data,e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),s=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.get("/customer_tpl_msg/");case 2:return t=e.sent,r=t.data,console.log(r),e.abrupt("return",r.results);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.get("/doctor_tpl_msg/");case 2:return t=e.sent,r=t.data,console.log(r),e.abrupt("return",r.results);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{chatLogs:a,fetchDoctorChatLogs:u,fetchDoctorMessageTemplates:l,fetchCustomerMessageTemplates:s}}},"498a":function(e,t,n){"use strict";var r=n("23e7"),o=n("58a8").trim,c=n("c8d2");r({target:"String",proto:!0,forced:c("trim")},{trim:function(){return o(this)}})},"4de4":function(e,t,n){"use strict";var r=n("23e7"),o=n("b727").filter,c=n("1dde"),a=n("ae40"),u=c("filter"),s=a("filter");r({target:"Array",proto:!0,forced:!u||!s},{filter:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},5530:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n("a4d3"),n("4de4"),n("4160"),n("e439"),n("dbb4"),n("b64b"),n("159b");var r=n("ade3");function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){Object(r["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,n){var r=n("1d80"),o=n("5899"),c="["+o+"]",a=RegExp("^"+c+c+"*"),u=RegExp(c+c+"*$"),s=function(e){return function(t){var n=String(r(t));return 1&e&&(n=n.replace(a,"")),2&e&&(n=n.replace(u,"")),n}};e.exports={start:s(1),end:s(2),trim:s(3)}},"62e4":function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},6834:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("5530"),o=n("7a23");function c(){var e="".concat("ws://v118-27-116-148.7813.static.cnode.io","/ws"),t=Object(o["ref"])(null),n=function(e){t.value=new WebSocket(e)},c=function(){null!=t.value&&t.value.close()},a=Object(o["ref"])(null),u=function(){null!=a.value&&(a.value.scrollTop=a.value.scrollHeight)},s=Object(o["ref"])(null),l=Object(o["computed"])((function(){return 1===s.value?"Open":3===s.value?"Closed":void 0})),i=function(e,o,c){n(e),s.value,null!=t.value&&(t.value.onopen=function(e){null!=t.value&&(console.log("on open"),s.value=t.value.OPEN)},t.value.onmessage=function(e){console.log("message "+e.data);var t=JSON.parse(e.data),n=Object(r["a"])({id:1},t);o.value.push(n),window.setTimeout((function(){u()}),100),null!=c&&c(t)},t.value.onclose=function(e){console.log("on close"),null!=t.value&&(s.value=t.value.CLOSED)},t.value.onerror=function(e){console.log("on error"),console.log(e),t.value})},f=Object(o["ref"])("");return{WS_BASE_URL:e,connection:t,connect:n,close:c,messageArea:a,scrollDown:u,wsState:s,wsStateStr:l,message:f,prepareWs:i}}},a640:function(e,t,n){"use strict";var r=n("d039");e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){throw 1},1)}))}},ade3:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return r}))},b64b:function(e,t,n){var r=n("23e7"),o=n("7b0b"),c=n("df75"),a=n("d039"),u=a((function(){c(1)}));r({target:"Object",stat:!0,forced:u},{keys:function(e){return c(o(e))}})},c8d2:function(e,t,n){var r=n("d039"),o=n("5899"),c="​᠎";e.exports=function(e){return r((function(){return!!o[e]()||c[e]()!=c||o[e].name!==e}))}},dbb4:function(e,t,n){var r=n("23e7"),o=n("83ab"),c=n("56ef"),a=n("fc6a"),u=n("06cf"),s=n("8418");r({target:"Object",stat:!0,sham:!o},{getOwnPropertyDescriptors:function(e){var t,n,r=a(e),o=u.f,l=c(r),i={},f=0;while(l.length>f)n=o(r,t=l[f++]),void 0!==n&&s(i,t,n);return i}})},e439:function(e,t,n){var r=n("23e7"),o=n("d039"),c=n("fc6a"),a=n("06cf").f,u=n("83ab"),s=o((function(){a(1)})),l=!u||s;r({target:"Object",stat:!0,forced:l,sham:!u},{getOwnPropertyDescriptor:function(e,t){return a(c(e),t)}})},e59e:function(e,t,n){"use strict";var r=n("7a23"),o={class:"text-xs mx-2"};function c(e,t,n,c,a,u){return Object(r["openBlock"])(),Object(r["createBlock"])("div",{class:["flex items-end px-1",{"justify-end":e.isMyMessage}]},[Object(r["createVNode"])("div",{class:["flex items-end space-y-1 mx-2",{"flex-row-reverse ":e.isMyMessage}]},[Object(r["createVNode"])("span",{innerHTML:e.chatLog.message,class:[{"rounded-bl-none bg-gray-300":!e.isMyMessage,"rounded-br-none":e.isMyMessage},"text-left sm:max-w-sm md:max-w-md break-words leading-tight px-4 py-4 rounded-lg inline-block text-gray-600"],style:{"font-size":"12px","background-color":e.isMyMessage?"#CCEAFF":""}},null,14,["innerHTML"]),Object(r["createVNode"])("div",o,Object(r["toDisplayString"])(e.HHMM(e.chatLog.created_at)),1)],2)],2)}var a=n("c1df"),u=n.n(a),s=Object(r["defineComponent"])({components:{},props:{chatLog:{type:Object,required:!0},isMyMessage:{type:Boolean}},setup:function(e,t){var n=function(e){return u()(e).format("H:mm")},r=function(e){return e.replaceAll("\n","<br>")};return{HHMM:n,htmlify:r}}});s.render=c;t["a"]=s}}]);
//# sourceMappingURL=SupportHairConsultant.19d4324d.js.map