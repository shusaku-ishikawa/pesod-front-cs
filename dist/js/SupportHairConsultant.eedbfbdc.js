(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["SupportHairConsultant"],{"037c":function(e,t,n){"use strict";n.r(t);var r=n("7a23"),a={class:"flex items-center absolute left-0"},o=Object(r["h"])("div",null," 相談窓口 ",-1),c=Object(r["h"])("div",null,"毛髪診断士に相談",-1),u={class:"flex-grow flex flex-col"},s={ref:"messageArea",class:"relative overflow-y-auto flex-grow"},l={class:"absolute w-full space-y-4 py-5"};function i(e,t,n,i,f,d){var b=Object(r["B"])("page-title-back"),p=Object(r["B"])("router-link"),g=Object(r["B"])("page-title"),v=Object(r["B"])("chat-message-card"),m=Object(r["B"])("chat-form"),O=Object(r["B"])("base-layout");return Object(r["t"])(),Object(r["d"])(O,null,{title:Object(r["H"])((function(){return[Object(r["h"])(g,null,{default:Object(r["H"])((function(){return[Object(r["h"])("div",a,[Object(r["h"])(p,{to:{name:"SupportTop"}},{default:Object(r["H"])((function(e){var t=e.href,n=e.navigate;return[Object(r["h"])(b,{href:t,onClick:n},null,8,["href","onClick"])]})),_:1}),o]),c,Object(r["h"])("div",{class:["w-3 h-3 shadow-lg rounded-full ml-1 text-white",{"bg-green-400":1===e.wsState,"bg-gray-600":3===e.wsState}]},null,2)]})),_:1})]})),default:Object(r["H"])((function(){return[Object(r["h"])("div",u,[Object(r["h"])("div",s,[Object(r["h"])("div",l,[(Object(r["t"])(!0),Object(r["d"])(r["a"],null,Object(r["z"])(e.messages,(function(e,t){return Object(r["t"])(),Object(r["d"])(v,{key:t,message:e},null,8,["message"])})),128))])],512),Object(r["h"])(m,{modelValue:e.message,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.message=t}),onSend:e.onSendMessage},null,8,["modelValue","onSend"])])]})),_:1})}n("498a");var f=n("e59e"),d=n("0b48"),b=n("472c"),p=n("6834"),g=Object(r["i"])({components:{ChatForm:d["a"],ChatMessageCard:f["a"]},setup:function(){var e=Object(b["a"])(),t=e.chatLogs,n=Object(p["a"])(),a=n.connection,o=(n.connect,n.messageArea),c=n.scrollDown,u=n.wsState,s=(n.wsStateStr,n.message),l=n.prepareWs,i="ws://localhost:8000/",f=function(){if(null!=a.value&&s.value.trim()&&a.value.readyState===a.value.OPEN){var e={speaker:{id:1,name:"Robert"},message:s.value};try{a.value.send(JSON.stringify(e)),s.value=""}catch(t){console.error("errr")}}};return Object(r["q"])((function(){l(i,t),window.setTimeout((function(){c()}),100)})),{onSendMessage:f,message:s,chatLogs:t,messageArea:o,wsState:u}}});g.render=i;t["default"]=g},"0b48":function(e,t,n){"use strict";n("498a");var r=n("7a23"),a={class:"w-full p-1"},o=Object(r["h"])("path",{stroke:"#374151",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M3 8V4m0 0h4M3 4l4 4m8 0V4m0 0h-4m4 0l-4 4m-8 4v4m0 0h4m-4 0l4-4m8 4l-4-4m4 4v-4m0 4h-4"},null,-1),c={class:"flex "};function u(e,t,n,u,s,l){return Object(r["t"])(),Object(r["d"])("div",a,[Object(r["h"])("form",{class:"relative",onSubmit:t[4]||(t[4]=Object(r["J"])((function(){}),["prevent"]))},[(Object(r["t"])(),Object(r["d"])("svg",{onClick:t[1]||(t[1]=function(t){return e.expand=!e.expand}),xmlns:"http://www.w3.org/2000/svg",class:"w-8 h-8 absolute cursor-pointer right-0 top-1",viewBox:"0 0 20 20",fill:"currentColor"},[o])),Object(r["h"])("textarea",{placeholder:"メッセージを入力",class:"focus:outline-none w-full border-t p-2",cols:"30",rows:e.expand?20:2,value:e.modelValue,onInput:t[2]||(t[2]=function(){return e.onInputMessage&&e.onInputMessage.apply(e,arguments)})},null,40,["rows","value"]),Object(r["h"])("div",c,[Object(r["A"])(e.$slots,"menu"),Object(r["h"])("button",{onClick:t[3]||(t[3]=function(){return e.onSendMessage&&e.onSendMessage.apply(e,arguments)}),disabled:!e.modelValue.trim(),class:"ml-auto bg-gray-100 rounded-lg border text-sm"}," 送信 ",8,["disabled"])])],32)])}var s=n("472c"),l=Object(r["i"])({components:{},props:{modelValue:{type:String}},setup:function(e,t){var n=Object(s["a"])(),a=(n.fetchCustomerMessageTemplates,function(e){var n=e.target;console.log("innput chagne"),n instanceof HTMLTextAreaElement&&t.emit("update:modelValue",n.value)}),o=function(){t.emit("send")},c=Object(r["y"])(!1);return{expand:c,onInputMessage:a,onSendMessage:o}}});l.render=u;t["a"]=l},"159b":function(e,t,n){var r=n("da84"),a=n("fdbc"),o=n("17c2"),c=n("9112");for(var u in a){var s=r[u],l=s&&s.prototype;if(l&&l.forEach!==o)try{c(l,"forEach",o)}catch(i){l.forEach=o}}},"17c2":function(e,t,n){"use strict";var r=n("b727").forEach,a=n("a640"),o=n("ae40"),c=a("forEach"),u=o("forEach");e.exports=c&&u?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},4160:function(e,t,n){"use strict";var r=n("23e7"),a=n("17c2");r({target:"Array",proto:!0,forced:[].forEach!=a},{forEach:a})},"472c":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));n("96cf");var r=n("1da1"),a=n("7a23"),o=n("2e44"),c=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o["a"].get("/chatlog/doctor/".concat(t));case 2:return n=e.sent,r=n.data,console.log(r),a=r.results,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o["a"].get("/customer_tpl_msg/");case 2:return t=e.sent,n=t.data,console.log(n),e.abrupt("return",n.results);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o["a"].get("/doctor_tpl_msg/");case 2:return t=e.sent,n=t.data,console.log(n),e.abrupt("return",n.results);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function l(){var e=Object(a["y"])([]);return{chatLogs:e,fetchDoctorChatLogs:c,fetchDoctorMessageTemplates:s,fetchCustomerMessageTemplates:u}}},"498a":function(e,t,n){"use strict";var r=n("23e7"),a=n("58a8").trim,o=n("c8d2");r({target:"String",proto:!0,forced:o("trim")},{trim:function(){return a(this)}})},"4de4":function(e,t,n){"use strict";var r=n("23e7"),a=n("b727").filter,o=n("1dde"),c=n("ae40"),u=o("filter"),s=c("filter");r({target:"Array",proto:!0,forced:!u||!s},{filter:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},5530:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n("a4d3"),n("4de4"),n("4160"),n("e439"),n("dbb4"),n("b64b"),n("159b");var r=n("ade3");function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){Object(r["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,n){var r=n("1d80"),a=n("5899"),o="["+a+"]",c=RegExp("^"+o+o+"*"),u=RegExp(o+o+"*$"),s=function(e){return function(t){var n=String(r(t));return 1&e&&(n=n.replace(c,"")),2&e&&(n=n.replace(u,"")),n}};e.exports={start:s(1),end:s(2),trim:s(3)}},"62e4":function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},6834:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("5530"),a=n("7a23");function o(){var e="".concat("ws://v118-27-116-148.7813.static.cnode.io","/ws"),t=Object(a["y"])(null),n=function(e){t.value=new WebSocket(e)},o=function(){null!=t.value&&t.value.close()},c=Object(a["y"])(null),u=function(){null!=c.value&&(c.value.scrollTop=c.value.scrollHeight)},s=Object(a["y"])(null),l=Object(a["b"])((function(){return 1===s.value?"Open":3===s.value?"Closed":void 0})),i=function(e,a,o){n(e),s.value,null!=t.value&&(t.value.onopen=function(e){null!=t.value&&(console.log("on open"),s.value=t.value.OPEN)},t.value.onmessage=function(e){console.log("message "+e.data);var t=JSON.parse(e.data),n=Object(r["a"])({id:1},t);a.value.push(n),window.setTimeout((function(){u()}),100),null!=o&&o(t)},t.value.onclose=function(e){console.log("on close"),null!=t.value&&(s.value=t.value.CLOSED)},t.value.onerror=function(e){console.log("on error"),console.log(e),t.value})},f=Object(a["y"])("");return{WS_BASE_URL:e,connection:t,connect:n,close:o,messageArea:c,scrollDown:u,wsState:s,wsStateStr:l,message:f,prepareWs:i}}},a640:function(e,t,n){"use strict";var r=n("d039");e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){throw 1},1)}))}},ade3:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return r}))},b64b:function(e,t,n){var r=n("23e7"),a=n("7b0b"),o=n("df75"),c=n("d039"),u=c((function(){o(1)}));r({target:"Object",stat:!0,forced:u},{keys:function(e){return o(a(e))}})},c8d2:function(e,t,n){var r=n("d039"),a=n("5899"),o="​᠎";e.exports=function(e){return r((function(){return!!a[e]()||o[e]()!=o||a[e].name!==e}))}},dbb4:function(e,t,n){var r=n("23e7"),a=n("83ab"),o=n("56ef"),c=n("fc6a"),u=n("06cf"),s=n("8418");r({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(e){var t,n,r=c(e),a=u.f,l=o(r),i={},f=0;while(l.length>f)n=a(r,t=l[f++]),void 0!==n&&s(i,t,n);return i}})},e439:function(e,t,n){var r=n("23e7"),a=n("d039"),o=n("fc6a"),c=n("06cf").f,u=n("83ab"),s=a((function(){c(1)})),l=!u||s;r({target:"Object",stat:!0,forced:l,sham:!u},{getOwnPropertyDescriptor:function(e,t){return c(o(e),t)}})},e59e:function(e,t,n){"use strict";var r=n("7a23"),a={class:"text-xs mx-2"};function o(e,t,n,o,c,u){return Object(r["t"])(),Object(r["d"])("div",{class:["flex items-end px-1",{"justify-end":e.isMyMessage}]},[Object(r["h"])("div",{class:["flex items-end space-y-1 mx-2",{"flex-row-reverse ":e.isMyMessage}]},[Object(r["h"])("span",{innerHTML:e.chatLog.message,class:[{"rounded-bl-none bg-gray-300":!e.isMyMessage,"rounded-br-none":e.isMyMessage},"text-left sm:max-w-sm md:max-w-md break-words text-sm leading-tight px-4 py-4 rounded-lg inline-block text-gray-600"],style:{"background-color":e.isMyMessage?"#CCEAFF":""}},null,14,["innerHTML"]),Object(r["h"])("div",a,Object(r["D"])(e.HHMM(e.chatLog.created_at)),1)],2)],2)}var c=n("c1df"),u=n.n(c),s=Object(r["i"])({components:{},props:{chatLog:{type:Object,required:!0},isMyMessage:{type:Boolean}},setup:function(e,t){var n=function(e){return u()(e).format("H:mm")},r=function(e){return e.replaceAll("\n","<br>")};return{HHMM:n,htmlify:r}}});s.render=o;t["a"]=s}}]);
//# sourceMappingURL=SupportHairConsultant.eedbfbdc.js.map