(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["SupportCS"],{"04f5":function(e,t,r){"use strict";r.r(t);var n=r("7a23"),c={class:"flex items-center absolute left-0"},a=Object(n["createVNode"])("div",null," 相談窓口 ",-1),o=Object(n["createVNode"])("div",null,"カスタマーサポート",-1),u={class:"flex-grow flex flex-col"},s={ref:"messageArea",class:"relative overflow-y-auto flex-grow"},i={class:"absolute w-full space-y-4 py-5"};function l(e,t,r,l,f,p){var d=Object(n["resolveComponent"])("page-title-back"),b=Object(n["resolveComponent"])("router-link"),g=Object(n["resolveComponent"])("page-title"),v=Object(n["resolveComponent"])("chat-message-card"),m=Object(n["resolveComponent"])("chat-form"),h=Object(n["resolveComponent"])("base-layout");return Object(n["openBlock"])(),Object(n["createBlock"])(h,null,{title:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(g,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])("div",c,[Object(n["createVNode"])(b,{to:{name:"SupportTop"}},{default:Object(n["withCtx"])((function(e){var t=e.href,r=e.navigate;return[Object(n["createVNode"])(d,{href:t,onClick:r},null,8,["href","onClick"])]})),_:1}),a]),o,Object(n["createVNode"])("div",{class:["w-3 h-3 shadow-lg rounded-full ml-1 text-white",{"bg-green-400":1===e.wsState,"bg-gray-600":3===e.wsState}]},null,2)]})),_:1})]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])("div",u,[Object(n["createVNode"])("div",s,[Object(n["createVNode"])("div",i,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.messages,(function(e,t){return Object(n["openBlock"])(),Object(n["createBlock"])(v,{key:t,message:e},null,8,["message"])})),128))])],512),Object(n["createVNode"])(m,{modelValue:e.message,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.message=t}),onSend:e.onSendMessage},null,8,["modelValue","onSend"])])]})),_:1})}r("99af"),r("498a");var f=r("e59e"),p=r("0b48"),d=r("472c"),b=r("6834"),g=r("da56"),v=Object(n["defineComponent"])({components:{ChatForm:p["a"],ChatMessageCard:f["a"]},setup:function(){var e,t=Object(g["a"])(),r=t.myPrescript,c=(t.getPrescript,Object(d["a"])()),a=c.chatLogs,o=(c.fetchDoctorChatLogs,Object(b["a"])()),u=o.WS_BASE_URL,s=o.connection,i=(o.connect,o.messageArea),l=o.scrollDown,f=o.wsState,p=(o.wsStateStr,o.message),v=o.prepareWs,m="".concat(u,"/chat/cs/").concat(null===(e=r.value)||void 0===e?void 0:e.customer.uuid),h=function(){if(null!=s.value&&p.value.trim()&&s.value.readyState===s.value.OPEN){var e={speaker:{id:1,name:"Robert"},message:p.value};try{s.value.send(JSON.stringify(e)),p.value=""}catch(t){console.error("errr")}}};return Object(n["onMounted"])((function(){v(m,a),window.setTimeout((function(){l()}),100)})),{onSendMessage:h,message:p,chatLogs:a,messageArea:i,wsState:f}}});v.render=l;t["default"]=v},"0b48":function(e,t,r){"use strict";r("498a");var n=r("7a23"),c={class:"w-full p-1"},a=Object(n["createVNode"])("path",{stroke:"#374151",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M3 8V4m0 0h4M3 4l4 4m8 0V4m0 0h-4m4 0l-4 4m-8 4v4m0 0h4m-4 0l4-4m8 4l-4-4m4 4v-4m0 4h-4"},null,-1),o={class:"flex "};function u(e,t,r,u,s,i){return Object(n["openBlock"])(),Object(n["createBlock"])("div",c,[Object(n["createVNode"])("form",{class:"relative",onSubmit:t[4]||(t[4]=Object(n["withModifiers"])((function(){}),["prevent"]))},[(Object(n["openBlock"])(),Object(n["createBlock"])("svg",{onClick:t[1]||(t[1]=function(t){return e.expand=!e.expand}),xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6 absolute cursor-pointer right-2 top-1 bg-white",viewBox:"0 0 20 20",fill:"currentColor"},[a])),Object(n["createVNode"])("textarea",{style:{resize:"none"},placeholder:"メッセージを入力",class:"focus:outline-none w-full border-t p-2 pr-8 overflow-y-scroll",cols:"30",rows:e.expand?20:2,value:e.modelValue,onInput:t[2]||(t[2]=function(){return e.onInputMessage&&e.onInputMessage.apply(e,arguments)})},null,40,["rows","value"]),Object(n["createVNode"])("div",o,[Object(n["renderSlot"])(e.$slots,"menu"),Object(n["createVNode"])("button",{onClick:t[3]||(t[3]=function(){return e.onSendMessage&&e.onSendMessage.apply(e,arguments)}),disabled:!e.modelValue.trim(),class:"ml-auto bg-gray-100 rounded-lg border text-sm"}," 送信 ",8,["disabled"])])],32)])}var s=r("472c"),i=Object(n["defineComponent"])({components:{},props:{modelValue:{type:String}},setup:function(e,t){var r=Object(s["a"])(),c=(r.fetchCustomerMessageTemplates,function(e){var r=e.target;console.log("innput chagne"),r instanceof HTMLTextAreaElement&&t.emit("update:modelValue",r.value)}),a=function(){t.emit("send")},o=Object(n["ref"])(!1);return{expand:o,onInputMessage:c,onSendMessage:a}}});i.render=u;t["a"]=i},"159b":function(e,t,r){var n=r("da84"),c=r("fdbc"),a=r("17c2"),o=r("9112");for(var u in c){var s=n[u],i=s&&s.prototype;if(i&&i.forEach!==a)try{o(i,"forEach",a)}catch(l){i.forEach=a}}},"17c2":function(e,t,r){"use strict";var n=r("b727").forEach,c=r("a640"),a=r("ae40"),o=c("forEach"),u=a("forEach");e.exports=o&&u?[].forEach:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}},4160:function(e,t,r){"use strict";var n=r("23e7"),c=r("17c2");n({target:"Array",proto:!0,forced:[].forEach!=c},{forEach:c})},"472c":function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));r("96cf");var n=r("1da1"),c=r("7a23"),a=r("2e44");function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"customer",t=Object(a["a"])(e),r=t.client,o=Object(c["ref"])([]),u=(Object(c["ref"])(1),function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var n,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.get("/chatlog/doctor/".concat(t));case 2:return n=e.sent,c=n.data,e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),s=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.get("/customer_tpl_msg/");case 2:return t=e.sent,n=t.data,console.log(n),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.get("/doctor_tpl_msg/");case 2:return t=e.sent,n=t.data,console.log(n),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{chatLogs:o,fetchDoctorChatLogs:u,fetchDoctorMessageTemplates:i,fetchCustomerMessageTemplates:s}}},"498a":function(e,t,r){"use strict";var n=r("23e7"),c=r("58a8").trim,a=r("c8d2");n({target:"String",proto:!0,forced:a("trim")},{trim:function(){return c(this)}})},"4de4":function(e,t,r){"use strict";var n=r("23e7"),c=r("b727").filter,a=r("1dde"),o=r("ae40"),u=a("filter"),s=o("filter");n({target:"Array",proto:!0,forced:!u||!s},{filter:function(e){return c(this,e,arguments.length>1?arguments[1]:void 0)}})},5530:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));r("a4d3"),r("4de4"),r("4160"),r("e439"),r("dbb4"),r("b64b"),r("159b");var n=r("ade3");function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){Object(n["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,r){var n=r("1d80"),c=r("5899"),a="["+c+"]",o=RegExp("^"+a+a+"*"),u=RegExp(a+a+"*$"),s=function(e){return function(t){var r=String(n(t));return 1&e&&(r=r.replace(o,"")),2&e&&(r=r.replace(u,"")),r}};e.exports={start:s(1),end:s(2),trim:s(3)}},"62e4":function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},6834:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r("5530"),c=r("7a23");function a(){var e="".concat("ws://v118-27-116-148.7813.static.cnode.io","/ws"),t=Object(c["ref"])(null),r=function(e){t.value=new WebSocket(e)},a=function(){null!=t.value&&t.value.close()},o=Object(c["ref"])(null),u=function(){null!=o.value&&(o.value.scrollTop=o.value.scrollHeight)},s=Object(c["ref"])(null),i=Object(c["computed"])((function(){return 1===s.value?"Open":3===s.value?"Closed":void 0})),l=function(e,c,a){r(e),s.value,null!=t.value&&(t.value.onopen=function(e){null!=t.value&&(console.log("on open"),s.value=t.value.OPEN)},t.value.onmessage=function(e){console.log("message "+e.data);var t=JSON.parse(e.data),r=Object(n["a"])({id:1},t);c.value.push(r),window.setTimeout((function(){u()}),100),null!=a&&a(t)},t.value.onclose=function(e){console.log("on close"),null!=t.value&&(s.value=t.value.CLOSED)},t.value.onerror=function(e){console.log("on error"),console.log(e),t.value})},f=Object(c["ref"])("");return{WS_BASE_URL:e,connection:t,connect:r,close:a,messageArea:o,scrollDown:u,wsState:s,wsStateStr:i,message:f,prepareWs:l}}},a640:function(e,t,r){"use strict";var n=r("d039");e.exports=function(e,t){var r=[][e];return!!r&&n((function(){r.call(null,t||function(){throw 1},1)}))}},ade3:function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,"a",(function(){return n}))},b64b:function(e,t,r){var n=r("23e7"),c=r("7b0b"),a=r("df75"),o=r("d039"),u=o((function(){a(1)}));n({target:"Object",stat:!0,forced:u},{keys:function(e){return a(c(e))}})},c8d2:function(e,t,r){var n=r("d039"),c=r("5899"),a="​᠎";e.exports=function(e){return n((function(){return!!c[e]()||a[e]()!=a||c[e].name!==e}))}},d81d:function(e,t,r){"use strict";var n=r("23e7"),c=r("b727").map,a=r("1dde"),o=r("ae40"),u=a("map"),s=o("map");n({target:"Array",proto:!0,forced:!u||!s},{map:function(e){return c(this,e,arguments.length>1?arguments[1]:void 0)}})},da56:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));r("d81d"),r("96cf");var n=r("1da1"),c=r("7a23"),a=r("2e44");function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"customer",t=Object(a["a"])(e),r=t.client,o=Object(c["ref"])(null),u=Object(c["ref"])([]),s=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.get("/prescript/");case 2:return t=e.sent,n=t.data,console.log(n),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.get("/prescript/interview_fix");case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var n,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.patch("/prescript/select_doctor",{doctor:t});case 2:return n=e.sent,c=n.data,e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.get("/prescripts/");case 2:return t=e.sent,n=t.data,console.log(n),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var n,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.get("/prescripts/".concat(t));case 2:return n=e.sent,c=n.data,console.log(c),e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,n){var c,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return c=n.map((function(e){return{product:e.id}})),console.log(c),e.next=4,r.patch("/prescribe/".concat(t),{products:c});case 4:return a=e.sent,o=a.data,console.log(o),e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),b=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.patch("/prescript/exam_fix",{});case 2:return t=e.sent,n=t.data,console.log(n),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var n,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.delete("/prescribe/".concat(t));case 2:return n=e.sent,c=n.data,e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{myPrescript:o,prescripts:u,getPrescript:s,fixInterview:i,selectDoctor:l,fetchPrescripts:f,fetchUserPrescripts:p,setPrescriptProducts:d,acceptPrescriptProducts:b,deletePrescriptProducts:g}}},dbb4:function(e,t,r){var n=r("23e7"),c=r("83ab"),a=r("56ef"),o=r("fc6a"),u=r("06cf"),s=r("8418");n({target:"Object",stat:!0,sham:!c},{getOwnPropertyDescriptors:function(e){var t,r,n=o(e),c=u.f,i=a(n),l={},f=0;while(i.length>f)r=c(n,t=i[f++]),void 0!==r&&s(l,t,r);return l}})},e439:function(e,t,r){var n=r("23e7"),c=r("d039"),a=r("fc6a"),o=r("06cf").f,u=r("83ab"),s=c((function(){o(1)})),i=!u||s;n({target:"Object",stat:!0,forced:i,sham:!u},{getOwnPropertyDescriptor:function(e,t){return o(a(e),t)}})},e59e:function(e,t,r){"use strict";var n=r("7a23"),c={class:"text-xs mx-2"};function a(e,t,r,a,o,u){return Object(n["openBlock"])(),Object(n["createBlock"])("div",{class:["flex items-end px-1",{"justify-end":e.isMyMessage}]},[Object(n["createVNode"])("div",{class:["flex items-end space-y-1 mx-2",{"flex-row-reverse ":e.isMyMessage}]},[Object(n["createVNode"])("span",{innerHTML:e.chatLog.message,class:[{"rounded-bl-none bg-gray-300":!e.isMyMessage,"rounded-br-none":e.isMyMessage},"text-left sm:max-w-sm md:max-w-md break-words leading-tight px-4 py-4 rounded-lg inline-block text-gray-600"],style:{"font-size":"12px","background-color":e.isMyMessage?"#CCEAFF":""}},null,14,["innerHTML"]),Object(n["createVNode"])("div",c,Object(n["toDisplayString"])(e.HHMM(e.chatLog.created_at)),1)],2)],2)}var o=r("c1df"),u=r.n(o),s=Object(n["defineComponent"])({components:{},props:{chatLog:{type:Object,required:!0},isMyMessage:{type:Boolean}},setup:function(e,t){var r=function(e){return u()(e).format("H:mm")},n=function(e){return e.replaceAll("\n","<br>")};return{HHMM:r,htmlify:n}}});s.render=a;t["a"]=s}}]);
//# sourceMappingURL=SupportCS.74285c8f.js.map